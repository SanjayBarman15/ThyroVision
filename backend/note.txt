{
  "predicted_class": 4,
  "tirads": 4,
  "confidence": 0.91,
  "features": {
    "composition": "Solid",
    "echogenicity": "Hypoechoic",
    "margins": "Irregular",
    "calcifications": "None",
    "shape": "Taller-than-wide"
  },
  "bounding_box": {
    "x": 132,
    "y": 98,
    "width": 210,
    "height": 180
  },
  "processed_path": "processed/mock-v1/class-4/doctor_x/patient_y/image_z.jpg",
  "model_version": "mock-v1",
  "inference_time_ms": 412,
  "created_at": "2024-01-01T00:00:00Z"
}



  Example: patients table
ALTER TABLE patients ENABLE ROW LEVEL SECURITY;

Policy: doctor can only see their own patients
CREATE POLICY "Doctor sees own patients"
ON patients
FOR SELECT
USING (doctor_id = auth.uid());

Insert policy
CREATE POLICY "Doctor inserts own patients"
ON patients
FOR INSERT
WITH CHECK (doctor_id = auth.uid());

Storage policy (Supabase SQL)
CREATE POLICY "Doctors upload own images"
ON storage.objects
FOR INSERT
USING (
  bucket_id = 'ultrasound-images'
  AND auth.uid()::text = (storage.foldername(name))[1]
);


üîê Step 6: Separate ML / training access
Tables ML team owns (NO frontend access):

training_labels

model_versions

inference_logs

üîí RLS:

ALTER TABLE training_labels ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Only service role"
ON training_labels
FOR ALL
USING (false);


‚û°Ô∏è Only backend (service role) can insert/export.
